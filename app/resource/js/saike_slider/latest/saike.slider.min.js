(function(e){e.fn.slider=function(u){var a=e.extend({},e.fn.slider.defaults,u),r=a.showSize,h=a.curPage;return this.each(function(){function v(){e('<div class="arrow-slider-left" id="J_imgLeft">left</div><div class="arrow-slider-right" id="J_imgRight">right</div>').appendTo(c);var d=c.find(".arrow-slider-left"),m=c.find(".arrow-slider-right"),n=parseInt((k.height()-d.height())/2);d.css({top:n,left:d.width()/3});m.css({top:n,right:d.width()/3});d.bind("mouseover",function(){e(this).addClass("arrow-slider-left-hover");clearInterval(g)}).bind("mouseout",function(){e(this).removeClass("arrow-slider-left-hover");a.auto?g=setInterval(function(){t(p)},a.interval):clearInterval(g)});m.bind("mouseover",function(){e(this).addClass("arrow-slider-right-hover");clearInterval(g)}).bind("mouseout",function(){e(this).removeClass("arrow-slider-right-hover");a.auto?g=setInterval(function(){t(p)},a.interval):clearInterval(g)});d.click(function(){if(!b.is(":animated")&&(b.find("li").slice(l-a.offsetSize,l).insertBefore(b.find("li:first")),b.css({left:"-="+k.outerWidth(!0)*a.offsetSize}),b.animate({left:"+="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){b.css({left:0})}),0<c.find(".slider-current-page").size())){f=c.find(".slider-current-page");1==parseInt(f.text())?(h=Math.ceil(q/r),f.text(h--)):f.text(parseInt(f.text())-1);h=f.text();var d=c.find("ul:last").find("li");d.removeClass("active-marker");e(d.eq(f.text()-1)).addClass("active-marker")}});m.click(function(){if(!b.is(":animated")&&(b.animate({left:"-="+k.outerWidth(!0)* a.offsetSize},a.speed,function(){b.css({left:0}).find("li:lt("+a.offsetSize+")").appendTo(b)}),0<c.find(".slider-current-page").size())){f=c.find(".slider-current-page");parseInt(f.text())==Math.ceil(q/r)?(h=0,f.text(++h)):f.text(1+parseInt(f.text()));h=f.text();var d=c.find("ul:last").find("li");d.removeClass("active-marker");e(d.eq(f.text()-1)).addClass("active-marker")}})}function t(d){var m=d.find("ul:first");"left"==a.direction?(m.animate({left:"-="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){m.css({left:0}).find("li:lt("+a.offsetSize+")").appendTo(m)}),h==Math.ceil(q/r)&&(h=0),0<c.find(".slider-current-page").size()&&c.find(".slider-current-page").text(++h)):(b.find("li").slice(l-a.offsetSize,l).insertBefore(b.find("li:first")),b.css({left:"-="+k.outerWidth(!0)*a.offsetSize}),b.animate({left:"+="+k.outerWidth(!0)*a.offsetSize},a.speed,function(){b.css({left:0})}),0<c.find(".slider-current-page").size()&&(f=c.find(".slider-current-page"),1==f.text()&&(h=Math.ceil(q/r)),f.text(h--)));d=c.find("ul:last").find("li");d.removeClass("active-marker");e(d.eq(h-1)).addClass("active-marker")}var g,c=e(this),p=c.find(".sld-items"),k=c.find("li"),b=c.find("ul:first"),l=b.find("li").size(),s=l%a.offsetSize,u=a.offsetSize-s;(0!=s||l<a.showSize)&&b.find("li:lt("+u+")").clone().appendTo(b);a.offsetSize>l&&e('<div class="slider-error-tips">请查看相关API</div>').appendTo(c);var q=b.find("li").size();1>=q&&(a.auto=!1);s=(k.width()+a.itemPadding)*r-a.itemPadding;b.find("li").css({"padding-right":a.itemPadding}).each(function(a,b){e(b).attr("data-item","item"+a)});b.find("li:first").addClass("cur");b.width((k.width()+a.itemPadding)*q).height(k.height());p.height(k.height()).width(s);c.width(s);c.addClass("slider-"+a.type);var f;a.offsetSize==a.showSize&&1==a.showSize&&a.showType&&(e('<div class="slider-total"><span class="slider-current-page">'+h+'</span>/<span class="slider-items">'+l+"</span></div>").appendTo(c),a.showAmount?e(".slider-total").css({display:"display"}):e(".slider-total").css({display:"none"}),function(){e.each(b.find("li"),function(b,c){var n=e(c).find("img").attr("alt");n&&a.alt&&(n=e('<div class="slider-tips">'+n+"</div>"),n.appendTo(e(c)))})}(),function(){var d=[];d.push('<div class="sldCap">');d.push('<ul class="slider-markers">');for(var f=0;f<l;f++)d.push("<li>"+(f+1)+"</li>");d.push("</ul>");d.push("</div>");c.append(d.join(""));(function(){return{excute:function(){var a;a=e(".slider-rectangle .slider-markers");if(0==!a.length){var b,c;b=a.width()/2;c=a.closest(".sldCap").width()/2;a.css("left",c-b)}}}})().excute();e(c.find(".slider-markers li").eq(a.curPage- 1)).addClass("active-marker");c.find(".slider-markers").delegate("li","mouseover",function(){clearInterval(g)});c.find(".slider-markers").delegate("li","click",function(){var d=e(this).index();if(!b.is(":animated")&&"undefind"!=d){var f=b.find("li[data-item$="+d+"]").index(),g=parseInt(b.find("li").eq(0).data("item").match(/\d+/)[0]);if(d===g)return;d>g?b.stop().animate({left:"-="+k.outerWidth(!0)*f},a.speed,function(){b.css({left:0}).find("li").slice(0,f).appendTo(b);b.find("li").removeClass("cur");b.find("li:first").addClass("cur")}):(g=b.find("li").slice(f,l),g.prependTo(b),b.css({left:"-="+k.outerWidth(!0)*g.length}),b.stop().animate({left:0},a.speed,function(){b.find("li").removeClass("cur");b.find("li:first").addClass("cur")}))}e(this).siblings().removeClass("active-marker").end().addClass("active-marker");c.find(".slider-current-page").text(d+1);h=parseInt(c.find(".slider-current-page").text())});c.find(".slider-markers").delegate("li","mouseout",function(){a.auto?g=setInterval(function(){t(p)},a.interval):clearInterval(g)})}());b.animate({left:"-="+k.outerWidth(!0)*a.offsetSize*(a.curPage-1)},0,function(){b.css({left:0}).find("li:lt("+a.offsetSize*(a.curPage-1)+")").appendTo(b)});p.hover(function(){clearInterval(g)},function(){a.auto?g=setInterval(function(){t(p)},a.interval):clearInterval(g)});if(a.showArrow){if(v(),l==a.offsetSize||l==a.showSize)a.auto=!1,c.find(".arrow-slider-left").unbind("click").unbind("mouseover"),c.find(".arrow-slider-right").unbind("click").unbind("mouseover")}else{if(a.noArrow)return;c.hover(function(){0==e(".arrow-slider-left").length&&v()},function(){e(".arrow-slider-left").remove();e(".arrow-slider-right").remove()})}a.auto&&p.trigger("mouseleave")})};e.fn.slider.defaults={offsetSize:1,showSize:1,itemPadding:0,auto:!0,curPage:1,showArrow:!0,noArrow:!1,speed:600,interval:5E3,direction:"left",alt:!1,type:"rectangle",showAmount:!1,showType:!0}})(jQuery);